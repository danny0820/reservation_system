   # ç¾é«®é ç´„ç³»çµ± - ç®¡ç† API

å¿«é€Ÿä¸Šæ‰‹æŒ‡å—å’Œ API ä½¿ç”¨èªªæ˜

## ğŸš€ å¿«é€Ÿå•Ÿå‹•

1. **å•Ÿå‹•æœå‹™**
   ```bash
   uvicorn main:app --reload --port 8080
   ```

2. **è¨ªå• API æ–‡æª”**
   - Swagger UI: http://127.0.0.1:8080/docs
   - ReDoc: http://127.0.0.1:8080/redoc

## ğŸ“‹ API å¿«é€Ÿåƒè€ƒ

### ğŸ” èªè­‰ç³»çµ±
- `POST /users/login` - ç”¨æˆ¶ç™»å…¥
- `POST /users/signup` - ç”¨æˆ¶è¨»å†Š

### ğŸ‘¤ å€‹äººè³‡æ–™ç®¡ç†
- `GET /users/me` - ç²å–å€‹äººè³‡è¨Š
- `PATCH /users/me` - æ›´æ–°å€‹äººè³‡è¨Š
- `PATCH /users/me/password` - æ›´æ–°å¯†ç¢¼
- `DELETE /users/me` - åˆªé™¤å¸³è™Ÿ

### ğŸ‘¥ ç”¨æˆ¶ç®¡ç†åŠŸèƒ½

#### ğŸ” ç®¡ç†å“¡å°ˆç”¨
- `GET /users/` - ç²å–æ‰€æœ‰ç”¨æˆ¶
- `POST /users/` - å‰µå»ºæ–°ç”¨æˆ¶
- `GET /users/{user_id}` - ç²å–æŒ‡å®šç”¨æˆ¶
- `PATCH /users/{user_id}` - æ›´æ–°æŒ‡å®šç”¨æˆ¶
- `DELETE /users/{user_id}` - åˆªé™¤æŒ‡å®šç”¨æˆ¶
- `POST /users/{user_id}/role` - åˆ†é…ç”¨æˆ¶è§’è‰²
- `POST /users/{user_id}/status` - æ›´æ”¹ç”¨æˆ¶ç‹€æ…‹
- `POST /users/{user_id}/activate` - å•Ÿç”¨ç”¨æˆ¶
- `POST /users/{user_id}/deactivate` - åœç”¨ç”¨æˆ¶

#### ğŸ‘¤ æ‰€æœ‰å·²èªè­‰ç”¨æˆ¶å¯ç”¨
- `GET /users/role/{role}` - ç²å–æŒ‡å®šè§’è‰²ç”¨æˆ¶
- `GET /users/status/{status}` - ç²å–æŒ‡å®šç‹€æ…‹ç”¨æˆ¶
- `GET /users/{user_id}/linked-accounts` - æŸ¥çœ‹é€£çµçš„ç¬¬ä¸‰æ–¹å¸³è™Ÿ
- `POST /users/{user_id}/send-verification` - ç™¼é€é©—è­‰ä¿¡
- `POST /users/{user_id}/reset-password` - é‡ç½®å¯†ç¢¼

### ğŸ›ï¸ å•†å“ç®¡ç†åŠŸèƒ½ âœ…

#### ğŸ“¦ æ‰€æœ‰å·²èªè­‰ç”¨æˆ¶å¯ç”¨
- `GET /products/` - ç²å–æ‰€æœ‰å•†å“/æœå‹™åˆ—è¡¨
- `GET /products/{product_id}` - ç²å–æŒ‡å®šå•†å“è©³æƒ…
- `GET /products/services` - ç²å–æœå‹™é …ç›®åˆ—è¡¨
- `GET /products/products` - ç²å–å•†å“é …ç›®åˆ—è¡¨
- `GET /products/search` - æœå°‹å•†å“

#### ğŸ” ç®¡ç†å“¡å°ˆç”¨
- `POST /products/` - å‰µå»ºæ–°å•†å“/æœå‹™
- `PATCH /products/{product_id}` - æ›´æ–°å•†å“è³‡è¨Š
- `DELETE /products/{product_id}` - åˆªé™¤å•†å“
- `PATCH /products/{product_id}/status` - æ›´æ–°å•†å“ç‹€æ…‹
- `PATCH /products/{product_id}/stock` - æ›´æ–°åº«å­˜
- `PATCH /products/{product_id}/price` - æ›´æ–°åƒ¹æ ¼

### ğŸ“… æ’ç¨‹ç®¡ç†åŠŸèƒ½ âœ…

#### ğŸ’‡â€â™€ï¸ è¨­è¨ˆå¸«æ’ç­ç®¡ç†
- `GET /schedules/stylists/{stylist_id}` - ç²å–è¨­è¨ˆå¸«æ’ç­
- `POST /schedules/stylists/{stylist_id}` - å‰µå»ºè¨­è¨ˆå¸«æ’ç­
- `PATCH /schedules/schedules/{schedule_id}` - æ›´æ–°æ’ç­
- `DELETE /schedules/schedules/{schedule_id}` - åˆªé™¤æ’ç­
- `GET /schedules/stylists/{stylist_id}/weekly` - ç²å–é€±æ’ç­

#### ğŸ–ï¸ è«‹å‡ç®¡ç†
- `GET /schedules/stylists/{stylist_id}/time-off` - ç²å–è«‹å‡è¨˜éŒ„
- `POST /schedules/stylists/{stylist_id}/time-off` - ç”³è«‹è«‹å‡
- `PATCH /schedules/time-off/{time_off_id}` - æ›´æ–°è«‹å‡ç”³è«‹
- `DELETE /schedules/time-off/{time_off_id}` - åˆªé™¤è«‹å‡ç”³è«‹
- `POST /schedules/time-off/{time_off_id}/approve` - æ‰¹å‡†è«‹å‡
- `POST /schedules/time-off/{time_off_id}/reject` - æ‹’çµ•è«‹å‡

#### ğŸ” å¯ç”¨æ€§æŸ¥è©¢
- `GET /schedules/stylists/{stylist_id}/availability` - æª¢æŸ¥è¨­è¨ˆå¸«å¯ç”¨æ€§
- `GET /schedules/stylists/{stylist_id}/conflicts` - æŸ¥æ‰¾æ’ç­è¡çª

### ğŸª é–€åº—ç®¡ç†åŠŸèƒ½ âœ…

#### â° ç‡Ÿæ¥­æ™‚é–“ç®¡ç†
- `GET /store/business-hours` - ç²å–ç‡Ÿæ¥­æ™‚é–“
- `POST /store/business-hours` - è¨­å®šç‡Ÿæ¥­æ™‚é–“
- `PATCH /store/business-hours/{day_of_week}` - æ›´æ–°ç‡Ÿæ¥­æ™‚é–“
- `DELETE /store/business-hours/{day_of_week}` - åˆªé™¤ç‡Ÿæ¥­æ™‚é–“

#### ğŸ”’ ä¼‘æ¥­ç®¡ç†
- `GET /store/closures` - ç²å–ä¼‘æ¥­è¨˜éŒ„
- `POST /store/closures` - å‰µå»ºä¼‘æ¥­è¨˜éŒ„
- `PATCH /store/closures/{closure_id}` - æ›´æ–°ä¼‘æ¥­è¨˜éŒ„
- `DELETE /store/closures/{closure_id}` - åˆªé™¤ä¼‘æ¥­è¨˜éŒ„

#### ğŸ“Š ç‹€æ…‹æŸ¥è©¢
- `GET /store/status` - ç²å–é–€åº—ç•¶å‰ç‹€æ…‹
- `GET /store/status/{date}` - ç²å–æŒ‡å®šæ—¥æœŸé–€åº—ç‹€æ…‹

## ğŸ”‘ é»˜èªç®¡ç†å“¡å¸³è™Ÿ

- **ç”¨æˆ¶å**: admin
- **å¯†ç¢¼**: admin123
- **è§’è‰²**: admin

## ğŸ“Š é–‹ç™¼é€²åº¦

### âœ… å·²å®Œæˆä¸¦éƒ¨ç½²
- [x] ç”¨æˆ¶èªè­‰ç³»çµ±
- [x] ç”¨æˆ¶ç®¡ç†åŠŸèƒ½
- [x] ç®¡ç†å“¡åŠŸèƒ½
- [x] è§’è‰²æŸ¥è©¢ API
- [x] é€²éšç®¡ç† API
- [x] ç”¨æˆ¶é—œä¿‚ç®¡ç†
- [x] åˆ†å±¤æ¬Šé™æ§åˆ¶
- [x] CRUD æ¶æ§‹
- [x] å®‰å…¨æ€§é…ç½®
- [x] API æ–‡æª”
- [x] å–®å…ƒæ¸¬è©¦ (88% è¦†è“‹ç‡)
- [x] å•†å“/æœå‹™ç®¡ç†æ¨¡çµ„
- [x] å•†å“åº«å­˜ç®¡ç†
- [x] å•†å“æœå°‹åŠŸèƒ½

### âœ… å·²å®Œæˆä¸¦éƒ¨ç½²
- [x] è¨­è¨ˆå¸«æ’ç­ç®¡ç†æ¨¡çµ„
- [x] è¨­è¨ˆå¸«è«‹å‡ç³»çµ±
- [x] æ’ç­è¡çªæª¢æ¸¬
- [x] è¨­è¨ˆå¸«å¯ç”¨æ€§æŸ¥è©¢
- [x] é–€åº—ç‡Ÿæ¥­æ™‚é–“ç®¡ç†
- [x] é–€åº—ä¼‘æ¥­ç®¡ç†
- [x] é–€åº—ç‹€æ…‹æŸ¥è©¢

### ğŸ“‹ å¾…é–‹ç™¼åŠŸèƒ½
- [ ] å®¢æˆ¶é ç´„æ¨¡çµ„
- [ ] é ç´„è¡çªæª¢æ¸¬
- [ ] é ç´„é€šçŸ¥ç³»çµ±
- [ ] æœå‹™è¨˜éŒ„ç®¡ç†
- [ ] å®¢æˆ¶æœå‹™æ­·å²
- [ ] æ”¶å…¥çµ±è¨ˆå ±è¡¨
- [ ] è¨­è¨ˆå¸«ç¸¾æ•ˆçµ±è¨ˆ
- [ ] é–€åº—åˆ†æå ±è¡¨

## ğŸ› ï¸ æŠ€è¡“æ£§

- **æ¡†æ¶**: FastAPI
- **è³‡æ–™åº«**: MySQL (Zeabur)
- **ORM**: SQLAlchemy
- **èªè­‰**: JWT
- **é©—è­‰**: Pydantic
- **æ¸¬è©¦**: Pytest

## ğŸ“ é …ç›®çµæ§‹

```
app/
â”œâ”€â”€ core/config.py              # é…ç½®ç®¡ç†
â”œâ”€â”€ crud/                       # CRUD æ“ä½œå±¤
â”‚   â”œâ”€â”€ user_crud.py           # ç”¨æˆ¶ CRUD
â”‚   â”œâ”€â”€ product_crud.py        # å•†å“ CRUD
â”‚   â”œâ”€â”€ schedule_crud.py       # æ’ç¨‹ CRUD
â”‚   â””â”€â”€ store_crud.py          # é–€åº— CRUD
â”œâ”€â”€ models/                     # è³‡æ–™åº«æ¨¡å‹
â”‚   â”œâ”€â”€ user_models.py         # ç”¨æˆ¶æ¨¡å‹
â”‚   â”œâ”€â”€ product_models.py      # å•†å“æ¨¡å‹
â”‚   â”œâ”€â”€ schedule_models.py     # æ’ç¨‹æ¨¡å‹
â”‚   â””â”€â”€ store_models.py        # é–€åº—æ¨¡å‹
â”œâ”€â”€ routers/                    # API è·¯ç”±
â”‚   â”œâ”€â”€ users.py               # ç”¨æˆ¶è·¯ç”±
â”‚   â”œâ”€â”€ products.py            # å•†å“è·¯ç”±
â”‚   â”œâ”€â”€ schedules.py           # æ’ç¨‹è·¯ç”± âœ…
â”‚   â””â”€â”€ store.py               # é–€åº—è·¯ç”± âœ…
â”œâ”€â”€ schemas/                    # Pydantic æ¨¡å‹
â”‚   â”œâ”€â”€ user_schemas.py        # ç”¨æˆ¶é©—è­‰æ¨¡å‹
â”‚   â”œâ”€â”€ product_schemas.py     # å•†å“é©—è­‰æ¨¡å‹
â”‚   â”œâ”€â”€ schedule_schemas.py    # æ’ç¨‹é©—è­‰æ¨¡å‹
â”‚   â””â”€â”€ store_schemas.py       # é–€åº—é©—è­‰æ¨¡å‹
â”œâ”€â”€ auth.py                     # èªè­‰ç³»çµ±
â””â”€â”€ database.py                 # è³‡æ–™åº«é€£æ¥
```

## ğŸ—ï¸ ç³»çµ±æ¶æ§‹

### ğŸ¯ æ¨¡çµ„ç‹€æ…‹
1. **ç”¨æˆ¶ç®¡ç†æ¨¡çµ„** âœ… - å®Œæ•´çš„ç”¨æˆ¶èªè­‰ã€æ¬Šé™æ§åˆ¶ã€å€‹äººè³‡æ–™ç®¡ç†
2. **å•†å“ç®¡ç†æ¨¡çµ„** âœ… - å•†å“å’Œæœå‹™é …ç›®çš„å®Œæ•´ CRUDï¼Œåº«å­˜ç®¡ç†
3. **æ’ç¨‹ç®¡ç†æ¨¡çµ„** âœ… - è¨­è¨ˆå¸«æ’ç­ã€è«‹å‡ã€å¯ç”¨æ€§ç®¡ç†
4. **é–€åº—ç®¡ç†æ¨¡çµ„** âœ… - ç‡Ÿæ¥­æ™‚é–“ã€ä¼‘æ¥­ç®¡ç†ã€ç‹€æ…‹æŸ¥è©¢

### ğŸ” æ¬Šé™åˆ†å±¤æ¶æ§‹
1. **ç®¡ç†å“¡ (admin)**: æ‰€æœ‰åŠŸèƒ½çš„å®Œæ•´ç®¡ç†æ¬Šé™
2. **è¨­è¨ˆå¸« (stylist)**: å€‹äººæ’ç­ç®¡ç†ã€è«‹å‡ç”³è«‹ã€å•†å“æŸ¥è©¢
3. **å®¢æˆ¶ (customer)**: å•†å“æŸ¥è©¢ã€å€‹äººè³‡æ–™ç®¡ç†
4. **æœªèªè­‰ç”¨æˆ¶**: åƒ…å¯è¨»å†Šå’Œç™»å…¥

### ğŸ—ƒï¸ è³‡æ–™åº«è¨­è¨ˆ
- **Users** - ç”¨æˆ¶åŸºæœ¬è³‡è¨Šå’Œè§’è‰²
- **Products** - å•†å“å’Œæœå‹™é …ç›®
- **StylistSchedules** - è¨­è¨ˆå¸«æ’ç­è¨˜éŒ„
- **StylistTimeOff** - è¨­è¨ˆå¸«è«‹å‡è¨˜éŒ„
- **StoreBusinessHours** - é–€åº—ç‡Ÿæ¥­æ™‚é–“
- **StoreClosures** - é–€åº—ä¼‘æ¥­è¨˜éŒ„

---

**ç‰ˆæœ¬**: 2.1.1  
**ç‹€æ…‹**: ç”Ÿç”¢å°±ç·’  
**æœ€å¾Œæ›´æ–°**: 2025-07-19

### ğŸ”„ æœ€æ–°æ›´æ–° (v2.1.1)

#### ğŸ› ï¸ ä¿®å¾©å•é¡Œ
- **è³‡æ–™åº«çµæ§‹ä¿®å¾©**: ä¿®å¾© StoreClosures è¡¨ç¼ºå°‘ created_at å’Œ updated_at æ¬„ä½çš„å•é¡Œ
- **ç‡Ÿæ¥­æ™‚é–“é©—è­‰é‚è¼¯**: ä¿®å¾©å…¬ä¼‘æ—¥è¨­å®šæ™‚ç„¡æ³•è¼¸å…¥æ™‚é–“ä½†æ™‚é–“åˆæ˜¯å¿…å¡«çš„é©—è­‰é‚è¼¯å•é¡Œ
- **API å›æ‡‰é©—è­‰**: ä¿®å¾©é–€åº—ç‡Ÿæ¥­æ™‚é–“æŸ¥è©¢æ™‚çš„å›æ‡‰é©—è­‰éŒ¯èª¤

#### âœ… æ–°å¢åŠŸèƒ½ (v2.1.0)
- **å•†å“ç®¡ç†ç³»çµ±**: å®Œæ•´çš„å•†å“å’Œæœå‹™é …ç›®ç®¡ç†
- **åº«å­˜ç®¡ç†**: å•†å“åº«å­˜è¿½è¹¤å’Œæ›´æ–°
- **åƒ¹æ ¼ç®¡ç†**: å‹•æ…‹åƒ¹æ ¼èª¿æ•´åŠŸèƒ½
- **æœå°‹åŠŸèƒ½**: å¼·åŒ–çš„å•†å“æœå°‹å’Œç¯©é¸
- **æ’ç¨‹ç®¡ç†**: è¨­è¨ˆå¸«æ’ç­å’Œè«‹å‡ç³»çµ± âœ… å·²éƒ¨ç½²
- **é–€åº—ç®¡ç†**: ç‡Ÿæ¥­æ™‚é–“å’Œä¼‘æ¥­ç®¡ç† âœ… å·²éƒ¨ç½²

#### âœ… ç³»çµ±å®Œå–„
- æ‰€æœ‰å››å€‹æ ¸å¿ƒæ¨¡çµ„å®Œæ•´éƒ¨ç½²
- å®Œæ•´çš„ API ç«¯é»è¦†è“‹
- çµ±ä¸€çš„æ¬Šé™æ§åˆ¶ç³»çµ±
- å®Œå–„çš„éŒ¯èª¤è™•ç†å’Œé©—è­‰
- è³‡æ–™åº«è¡¨çµæ§‹å®Œæ•´æ€§é©—è­‰

### ğŸ¯ ä¸‹ä¸€æ­¥é–‹ç™¼è¨ˆåŠƒ
1. **é–‹ç™¼é ç´„ç®¡ç†ç³»çµ±** - å®¢æˆ¶é ç´„æ ¸å¿ƒåŠŸèƒ½
2. **å»ºç«‹çµ±è¨ˆå ±è¡¨ç³»çµ±** - ç‡Ÿæ”¶å’Œç¸¾æ•ˆåˆ†æ
3. **å„ªåŒ–ç”¨æˆ¶é«”é©—** - å‰ç«¯ç•Œé¢å’Œæµç¨‹æ”¹å–„
4. **æ“´å±•é€šçŸ¥ç³»çµ±** - éƒµä»¶å’Œè¨Šæ¯æ¨é€åŠŸèƒ½